@model IEnumerable<AirlineReseravtionSystem.Models.AvailableSeats>
@{
    ViewData["Title"] = "BookFlight";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<div class="plane">
    <div class="cockpit">
        <h1>Please select a seat</h1>
    </div>
    <div class="exit exit--front fuselage">
    </div>
        <table class="table">
            <thead>
                <tr>
                    <th>

                    </th>
                    <th>
                        A
                    </th>

                    <th>
                        B
                    </th>

                    <th>
                        C
                    </th>

                    <th>
                        D
                    </th>
                    <th>
                        E
                    </th>
                    <th>
                        F
                    </th>
                </tr>
            </thead>
            <tbody>

                @*
        ----< Convert the 2 strings returned from the Controller into Arrays >----
                *@

            @{
                    string[] seatNumber = { };
                    string[] seatStatus = { };

                    foreach (var seating in Model)
                    {
                        if (seating.flightSeating.EconomyClassSeatNumbers == null)
                        {
                            seatNumber = seating.flightSeating.FirstClassSeatNumbers.Split(",");
                            seatStatus = seating.flightSeating.FirstClassSeatStatus.Split(",");
                        }
                        else
                        {
                            seatNumber = seating.flightSeating.EconomyClassSeatNumbers.Split(",");
                            seatStatus = seating.flightSeating.EconomyClassSeatStatus.Split(",");
                        }
                    }

                    @*
                        ----< Combine the SeatNumber String and SeatStatus array into Dictionary >----
                    *@

            IDictionary<string, string> seatsDictionary = new Dictionary<string, string>();

            for (int i = 0; i < seatNumber.Length; i++)
            {
                seatsDictionary.Add(seatNumber[i], seatStatus[i]);
            }

            int k = 1;
            int count = 1;
            while (count <= seatsDictionary.Count)
            {
                int i = 1;
                      <tr>
                          <td>
                              <strong>@k</strong>
                          </td>
                          @{
                              k++;
                          }
                        @foreach (var entry in seatsDictionary)
                        {
                            
                            if (i > 6)
                            {
                                break;
                            }                           

                                <td>
                                    <ul class="cabin fuselage">
                                        <li>
                                            <input type="checkbox" id="@entry.Key" />
                                            <label for="@entry.Key">@entry.Value</label>
                                        </li>
                                    </ul>

                                </td>
                                i++;

                                @*
                                    ----< Removing the dictionary item that has been updated >----
                                *@

                            count++;

                         }
                          @for(int j=0; j<=6; j++)
                          {
                              seatsDictionary.Remove(seatsDictionary.Keys.First());
                          }
                      </tr>
                    }


                }
            </tbody>

        </table>
    
    <div class="exit exit--back fuselage">

    </div>
</div>

